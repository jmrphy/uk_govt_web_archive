theurl <- "http://webarchive.nationalarchives.gov.uk/search/?y=11&query=inflation&where=text&x=15&start=0"
tables <- readHTMLTable(theurl)
require(XML)
install.packages("XML")
require(XML)
tables <- readHTMLTable(theurl)
tables
tables <- readHTMLTable(theurl)
tables
page<-xmlTreeParse(theurl)
theurl<-"http://webarchive.nationalarchives.gov.uk/search/?y=14&query=finance&where=text&x=26&start=10"
page<-xmlTreeParse(theurl)
theurl <- "http://webarchive.nationalarchives.gov.uk/search/?y=11&query=inflation&where=text&x=15&start=0"
page<-xmlTreeParse(theurl)
tables <- readHTMLTable(theurl)
tables
load("/Users/jmm2e13/Desktop/lda_models.Rdata")
require(tm)
require(slam)
require(topicmodels)
require(ggplot2)
options(scipen=999)
logliks <- as.data.frame(as.matrix(lapply(lda.models, logLik)))
logliks$LogLikelihood<-as.numeric(logliks$V1)
logliks$K<-c(50, 100, 200, 300, 400, 500)
lda.models[1]
lda.models[2]
lda.models[26]
lda.models[27]
for i in 1:26 {
print(lda.models[i])
}
for i in 1:26 {
print(lda.models[i])
}
for i in 1:26 {
print(lda.models[i])
}
for i in 1:26 (
print(lda.models[i])
(
?for
ยง
for (i in 1:26) {
print(lda.models[i])
{
for (i in 1:26) {
lda.models[i]
{
?for
lda.models[23]
lda.models[22]
lda.models[21]
lda.models[20]
lda.models[19]
lda.models[1]
lda.models[2]
lda.models[3]
lda.models[4]
lda.models[5]
lda.models[6]
lda.models[7]
lda.models[26]
lda.models[25]
logliks$K<-c(5,30,1)
options(scipen=999)
logliks <- as.data.frame(as.matrix(lapply(lda.models, logLik)))
logliks$LogLikelihood<-as.numeric(logliks$V1)
logliks$K<-c(5,30,1)
logliks$K<-seq(5,30,1)
ggplot(logliks, aes(x=K, y=LogLikelihood)) + geom_line() + theme_bw()
load("data/globalisation_dtm.Rdata")
sampledtm<-dtm[sample(nrow(dtm),size=(dim(dtm)[1]/10),replace=FALSE),]
rm(dtm)
dim(sampledtm) # check, reduce
setwd("~/Dropbox/gh_projects/uk_govt_web_archive")
require(tm)
require(slam)
require(topicmodels)
load("data/globalisation_dtm.Rdata")
sampledtm<-dtm[sample(nrow(dtm),size=(dim(dtm)[1]/10),replace=FALSE),]
rm(dtm)
dim(sampledtm) # check, reduced
options(scipen=999)
logliks <- as.data.frame(as.matrix(lapply(lda.models, logLik)))
logliks$LogLikelihood<-as.numeric(logliks$V1)
logliks$K<-seq(5,30,1)
ggplot(logliks, aes(x=K, y=LogLikelihood)) + geom_line() + theme_bw()
perplexity <- as.data.frame(as.matrix(lapply(lda.models, perplexity)))
logliks$Perplexity<-as.numeric(perplexity$V1)
ggplot(logliks, aes(x=K, y=Perplexity)) + geom_line() + theme_bw()
logliks$K[diff(logliks$LogLikelihood)<=0]
setwd("~/Dropbox/gh_projects/uk_govt_web_archive")
require(tm)
require(slam)
require(topicmodels)
load("data/globalisation_dtm.Rdata")
sampledtm<-dtm[sample(nrow(dtm),size=(dim(dtm)[1]/10),replace=FALSE),]
rm(dtm)
dim(sampledtm) # check, reduced
rm(logliks)
rm(perplexity)
rm(lda.models)
set.seed(666)
set.seed(666)
set.seed(666)
lda.models <- lapply(c(50, 100, 400), function(d){LDA(sampledtm, d)})
save(lda.models, file="~/Dropbox/gh_projects/uk_govt_web_archive/data/lda_models.Rdata")
gc()
rm(lda.models)
lda.models <- lapply(c(5, 50, 100, 400, 1000), function(d){LDA(sampledtm, d)})
save(lda.models, file="~/Dropbox/gh_projects/uk_govt_web_archive/data/lda_models.Rdata")
